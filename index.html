<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>COSTCODLE</title>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-J8Q97VV1GQ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-J8Q97VV1GQ");
    </script>

    <!-- Favicon Configuration -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/public/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/public/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/public/favicon-16x16.png"
    />
    <link rel="manifest" href="/public/site.webmanifest" />
    <link
      rel="mask-icon"
      href="/public/safari-pinned-tab.svg"
      color="#5bbad5"
    />
    <link rel="shortcut icon" href="/public/favicon.ico" />
    <meta name="msapplication-TileColor" content="#dcdcdc" />
    <meta name="msapplication-config" content="/public/browserconfig.xml" />
    <meta name="theme-color" content="#ffffff" />

    <link rel="stylesheet" href="styles/game.css" />
    <link rel="stylesheet" href="styles/overlay.css" />
    <link rel="stylesheet" href="styles/global.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=VT323&display=swap"
      rel="stylesheet"
    />

    <!-- Legacy jQuery for searchBar.js compatibility -->
    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"
      defer
    ></script>

    <!-- Currency input formatting (legacy) -->
    <script src="scripts/searchBar.js" defer></script>

    <!-- TypeScript compiled application -->
    <script type="module" src="scripts/main.js"></script>
  </head>

  <body>
    <div id="main-page">
      <header id="site-header">
        <div id="header-container">
          <button id="info-button" data-overlay="info-overlay" type="button" aria-label="Open game instructions" title="How to play">
            ?
          </button>
          <h1 id="title" class="title costco-red">
            <center>COSTCO<span class="costco-blue">DLE</span></center>
          </h1>
          <div id="header-buttons">
            <button id="calendar-button" data-overlay="calendar-overlay" type="button" aria-label="Open calendar" title="Calendar">
              üìÖ
            </button>
            <button id="stat-button" data-overlay="stats-overlay" type="button" aria-label="View game statistics" title="Statistics">
              <img
                src="./assets/stat-logo.svg"
                style="height: 100%; width: 100%"
                alt="Statistics icon"
                role="img"
              />
            </button>
          </div>
        </div>
        <div id="mode-toggle-container">
          <button id="mode-toggle" class="mode-toggle" aria-label="Toggle between daily challenge and archive mode" title="Switch game mode">
            <span id="mode-text">Daily Challenge</span>
            <span class="mode-indicator" aria-hidden="true">üéØ</span>
          </button>
        </div>
      </header>

      <main id="game-container" role="main" aria-label="Costcodle game">
        <div id="share-toast" class="animate__animated hide" role="alert" aria-live="polite">
          <center><span class="toast-text">Results copied to clipboard</span></center>
        </div>
        <div id="info-card" class="animate__animated" role="img" aria-label="Product to guess">
          <div id="image-container" role="img"></div>
          <div id="product-info" aria-live="polite"></div>
        </div>
        <div id="game-stats" aria-live="polite" aria-label="Game progress and results"></div>
        <div id="guesses-container" role="group" aria-label="Guess attempts">
          <div id="warning-toast" class="animate__animated hide" role="alert" aria-live="assertive">
            <center>Invalid Guess ‚ö†Ô∏è</center>
          </div>
          <div id="1" class="guess-container" aria-label="Guess 1" role="group"></div>
          <div id="2" class="guess-container" aria-label="Guess 2" role="group"></div>
          <div id="3" class="guess-container" aria-label="Guess 3" role="group"></div>
          <div id="4" class="guess-container" aria-label="Guess 4" role="group"></div>
          <div id="5" class="guess-container" aria-label="Guess 5" role="group"></div>
          <div id="6" class="guess-container" aria-label="Guess 6" role="group"></div>
          <div
            id="input-container"
            class="guess-container transparent-background"
          >
            <div id="text-input-container">
              <div id="input-label">$</div>
              <input
                id="guess-input"
                type="text"
                pattern="^\$\d{1,3}(,\d{3})*(\.\d+)?$"
                data-type="currency"
                placeholder="Enter a guess..."
                aria-label="Enter your price guess"
                aria-describedby="input-label"
                role="textbox"
              />
            </div>
            <div id="button-container">
              <button id="guess-button" class="active" aria-label="Submit your price guess" type="submit">SUBMIT</button>
            </div>
          </div>
        </div>
        <div id="info-overlay" class="overlay" style="display: none" role="dialog" aria-modal="true" aria-labelledby="info-title" aria-hidden="true">
          <div id="info-body" class="overlay-body">
            <h2 id="info-title" class="sr-only" tabindex="-1">How to Play Costcodle</h2>
            <div class="info-section">
              <h3><u>The game</u></h3>
              <p>
                Guess the <span class="costco-red">COSTCO</span
                ><span class="costco-blue">DLE</span> in 6 tries.
              </p>
              <br />
              <ul style="list-style-type: square">
                <li>Each guess must be a valid price.</li>
                <li>
                  Incorrect guesses will help guide you to the target price.
                </li>
              </ul>
              <br />
              <p>If you guess within 5% of the target price, you win!</p>
              <br />
              <p>
                A new <span class="costco-red">COSTCO</span
                ><span class="costco-blue">DLE</span> is available every day!
              </p>
            </div>
            <div class="info-section">
              <h3><u>Examples</u></h3>
              <div class="guess-container transparent-background">
                <div class="guess-value-container animate__flipInX">$10.00</div>
                <div
                  class="guess-direction-container animate__flipInX guess-far"
                >
                  &uarr;
                </div>
              </div>
              <p>
                First guess of $10.00 is low by more than 25% of the target
                price.
              </p>
              <br />
              <div class="guess-container transparent-background">
                <div class="guess-value-container animate__flipInX">$18.00</div>
                <div
                  class="guess-direction-container animate__flipInX guess-near"
                >
                  &darr;
                </div>
              </div>
              <p>
                Next guess of $18.00 is too high but within 25% of the target
                price.
              </p>
              <br />
              <div class="guess-container transparent-background">
                <div class="guess-value-container animate__flipInX">$16.00</div>
                <div
                  class="guess-direction-container animate__flipInX guess-win"
                >
                  &check;
                </div>
              </div>
              <p>
                The guess of $16.00 was within 5% of the target price! You win!
              </p>
            </div>
            <div class="info-section">
              <p>
                If you would like to support my work, you can
                <a
                  href="https://www.buymeacoffee.com/kerm"
                  target="_blank"
                  noreferrer="noopener noreferrer"
                  >buy me a coffee!<span style="font-size: 14px">‚òï</span></a
                >
              </p>
            </div>
            <div class="info-section">
              <p>
                Source code available on my
                <a
                  href="https://github.com/KermWasTaken"
                  target="_blank"
                  noreferrer="noopener noreferrer"
                  >GitHub</a
                >!
              </p>
              <p>
                Suggestions? Find a bug?
                <a href="mailto: costcodle@gmail.com">Let me know!</a>
              </p>
            </div>
            <div class="info-section">
              <p>
                Special thanks to
                <a
                  href="https://oec.world/en/tradle/"
                  target="_blank"
                  noreferrer="noopener noreferrer"
                >
                  <span style="color: rgb(255, 166, 63)">TRAD</span>LE</a
                >
                and
                <a
                  href="https://www.nytimes.com/games/wordle/index.html"
                  target="_blank"
                  noreferrer="noopener noreferrer"
                  >Wordle</a
                >
                for inspiring <span class="costco-red">COSTCO</span
                ><span class="costco-blue">DLE</span>!
              </p>
              <br />
              <p>And thank you for checking out my game!</p>
            </div>
            <div style="margin-top: 8px">
              <p>
                Created by
                <a
                  href="https://github.com/KermWasTaken"
                  target="_blank"
                  noreferrer="noopener noreferrer"
                  >@Kerm</a
                >
              </p>
            </div>
          </div>
        </div>
        <div id="stats-overlay" class="overlay" style="display: none" role="dialog" aria-modal="true" aria-labelledby="stats-title" aria-hidden="true">
          <div id="stat-body" class="overlay-body">
            <h2 id="stats-title" tabindex="-1">STATISTICS</h2>
            <div id="statistics" role="group" aria-label="Game statistics">
              <div class="statistic">
                <div id="number-wins" class="stat"></div>
                <div class="descriptor">Played</div>
              </div>
              <div class="statistic">
                <div id="win-percent" class="stat"></div>
                <div class="descriptor">Win %</div>
              </div>
              <div class="statistic">
                <div id="current-streak" class="stat"></div>
                <div class="descriptor">
                  <center>Current<br />Streak</center>
                </div>
              </div>
              <div class="statistic">
                <div id="max-streak" class="stat"></div>
                <div class="descriptor">
                  <center>Max<br />Streak</center>
                </div>
              </div>
            </div>
            <h3>GUESS DISTRIBUTION</h3>
            <div class="graph" role="img" aria-label="Distribution of guesses across attempts">
              <div class="graph-row" role="group" aria-label="Attempt 1">
                <div class="graph-label">1</div>
                <div id="graph-1" class="graphElem" aria-label="Wins in 1 guess"></div>
              </div>
              <div class="graph-row" role="group" aria-label="Attempt 2">
                <div class="graph-label">2</div>
                <div id="graph-2" class="graphElem" aria-label="Wins in 2 guesses"></div>
              </div>
              <div class="graph-row" role="group" aria-label="Attempt 3">
                <div class="graph-label">3</div>
                <div id="graph-3" class="graphElem" aria-label="Wins in 3 guesses"></div>
              </div>
              <div class="graph-row" role="group" aria-label="Attempt 4">
                <div class="graph-label">4</div>
                <div id="graph-4" class="graphElem" aria-label="Wins in 4 guesses"></div>
              </div>
              <div class="graph-row" role="group" aria-label="Attempt 5">
                <div class="graph-label">5</div>
                <div id="graph-5" class="graphElem" aria-label="Wins in 5 guesses"></div>
              </div>
              <div class="graph-row" role="group" aria-label="Attempt 6">
                <div class="graph-label">6</div>
                <div id="graph-6" class="graphElem" aria-label="Wins in 6 guesses"></div>
              </div>
            </div>
          </div>
        </div>
        <div id="calendar-overlay" class="overlay" style="display: none" role="dialog" aria-modal="true" aria-labelledby="calendar-title" aria-hidden="true">
          <div id="calendar-body" class="overlay-body">
            <h2 id="calendar-title" tabindex="-1">GAME CALENDAR</h2>
            <div class="calendar-header">
              <button id="prev-month" class="calendar-nav-btn" aria-label="Previous month">‚Äπ</button>
              <span id="calendar-month-year" class="calendar-month-display"></span>
              <button id="next-month" class="calendar-nav-btn" aria-label="Next month">‚Ä∫</button>
            </div>
            <div class="calendar-grid">
              <div class="calendar-weekdays">
                <div class="calendar-weekday">Sun</div>
                <div class="calendar-weekday">Mon</div>
                <div class="calendar-weekday">Tue</div>
                <div class="calendar-weekday">Wed</div>
                <div class="calendar-weekday">Thu</div>
                <div class="calendar-weekday">Fri</div>
                <div class="calendar-weekday">Sat</div>
              </div>
              <div id="calendar-days" class="calendar-days">
                <!-- Calendar days will be generated by JavaScript -->
              </div>
            </div>
            <div class="calendar-footer">
              <button id="today-btn" class="calendar-action-btn">Today</button>
              <button id="random-game-btn" class="calendar-action-btn">Random Game</button>
            </div>
          </div>
        </div>
      </main>

      <footer id="site-footer">
        <div id="database-link">
          <a
            href="https://costcofdb.com/food-database"
            target="_blank"
            rel="noopener noreferrer"
            >Costco Food Database</a
          >
        </div>
        <div id="dev-name">&copy;Kerm</div>
      </footer>
    </div>
  </body>
</html>
